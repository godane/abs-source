--- src/anki-0.9.9.8.6/libanki/anki/db.py	2010-02-12 20:00:52.000000000 +1100
+++ tmp/db.py	2010-04-21 14:35:20.809984499 +1000
@@ -65,6 +65,27 @@
             self._lockDB()
         self._seen = True
 
+    def save(self, obj):
+        # compat
+        if sqlalchemy.__version__.startswith("0.4."):
+            self._session.save(obj)
+        else:
+            self._session.add(obj)
+
+    def clear(self):
+        # compat
+        if sqlalchemy.__version__.startswith("0.4."):
+            self._session.clear()
+        else:
+            self._session.expunge_all()
+
+    def update(self, obj):
+        # compat
+        if sqlalchemy.__version__.startswith("0.4."):
+            self._session.update(obj)
+        else:
+            self._session.add(obj)
+
     def execute(self, *a, **ka):
         x = self._session.execute(*a, **ka)
         runHook("dbFinished")
